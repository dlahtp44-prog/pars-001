<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>CS / 파손 등록</title>
    <style>
        .row {
            display: flex;
            gap: 6px;
            margin-bottom: 6px;
            align-items: center;
        }
        .row input {
            width: 120px;
        }
        .row .qty {
            width: 60px;
        }
        .header span {
            font-size: 12px;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>

<h2>CS / 파손 등록</h2>

<form method="post" action="/api/damage">

    <label>발생일</label><br>
    <input type="date" name="occurred_at"
           value="{{ request.state.today if request.state.today else '' }}"
           required>
    <br><br>

    <!-- ✅ 컬럼명 -->
    <div class="row header">
        <span style="width:120px;">창고</span>
        <span style="width:120px;">로케이션</span>
        <span style="width:120px;">브랜드</span>
        <span style="width:120px;">품번</span>
        <span style="width:160px;">품명</span>
        <span style="width:80px;">LOT</span>
        <span style="width:100px;">규격</span>
        <span style="width:60px;">수량</span>
        <span style="width:120px;"></span>
    </div>

    <!-- ✅ 입력 -->
    <div class="row">
        <input name="warehouse" required>
        <input name="location" required>
        <input name="brand">
        <input name="item_code" required>
        <input name="item_name" style="width:160px;" required>
        <input name="lot" style="width:80px;" required>
        <input name="spec" style="width:100px;" required>
        <input name="qty" type="number" min="1" class="qty" required>

        <label style="font-size:12px;">
            <input type="checkbox" name="deduct_inventory" value="1">
            재고차감
        </label>
    </div>

    <br>

    <label>파손 유형</label><br>
    <select name="damage_code_id" required>
        <option value="">선택</option>
        {% for c in damage_codes %}
            <option value="{{ c.id }}">
                {{ c.category }} / {{ c.type }} / {{ c.situation }}
            </option>
        {% endfor %}
    </select>

    <br><br>

    <label>상세 내용</label><br>
    <textarea name="detail" rows="4" cols="60"
              placeholder="파손 상황을 간단히 입력하세요"></textarea>

    <br><br>

    <button type="submit">등록</button>
</form>

<div style="margin-top:20px;">
    <a href="/">
        <button type="button">메인으로 돌아가기</button>
    </a>
</div>

</body>
</html>
