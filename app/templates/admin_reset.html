<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/static/app.css"/>
  <title>ì „ì²´ ë¦¬ì…‹ | PARS WMS</title>

  <style>
    .danger {
      border-color: #dc2626 !important;
      background: rgba(220,38,38,0.08);
    }
    .danger-btn {
      background: #dc2626;
      border-color: #dc2626;
      color: #fff;
    }
    .danger-btn:hover {
      opacity: 0.9;
    }
  </style>
</head>

<body>
<div class="container">
  <div class="card highlight danger">

    <h2>âš ï¸ ì¬ê³  / ì´ë ¥ ì „ì²´ ë¦¬ì…‹</h2>

    <p class="small">
      ì´ ì‘ì—…ì€ <b>ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</b><br/>
      <b>inventory / history</b> í…Œì´ë¸”ì´ ëª¨ë‘ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.<br/>
      ê´€ë¦¬ìë§Œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
    </p>

    <label>ì‘ì—…ì</label>
    <input
      id="operator"
      placeholder="ê´€ë¦¬ìëª… (ì˜ˆ: admin)"
      value="SYSTEM"
    >

    <label style="margin-top:10px;">í™•ì¸ ë¬¸êµ¬ ì…ë ¥</label>
    <input
      id="confirm"
      placeholder="RESET"
    >

    <button
      id="btnReset"
      class="danger-btn"
      style="margin-top:14px; width:100%;"
    >
      ğŸ”¥ ì „ì²´ ì´ˆê¸°í™” ì‹¤í–‰
    </button>

    <pre id="out" class="card" style="white-space:pre-wrap; margin-top:14px;"></pre>

    <p style="margin-top:14px;">
      <a href="/">â† ë©”ì¸</a>
    </p>
  </div>
</div>

<script>
const btn = document.getElementById("btnReset");
const out = document.getElementById("out");

btn.onclick = async () => {
  const confirmText = document.getElementById("confirm").value.trim();
  const operator = document.getElementById("operator").value.trim() || "SYSTEM";

  if (confirmText !== "RESET") {
    alert("í™•ì¸ ë¬¸êµ¬ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. 'RESET' ì„ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }

  if (!window.confirm(
    "âš  ì •ë§ë¡œ ì¬ê³ ì™€ ì´ë ¥ì„ ì „ë¶€ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
  )) {
    return;
  }

  out.textContent = "ì²˜ë¦¬ì¤‘...";

  const fd = new FormData();
  fd.append("confirm", confirmText);
  fd.append("operator", operator);

  try {
    const res = await fetch("/api/admin/reset-all", {
      method: "POST",
      body: fd
    });

    out.textContent = await res.text();
  } catch (e) {
    out.textContent = "âŒ ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
  }
};
</script>

</body>
</html>
