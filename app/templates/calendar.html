<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/static/app.css"/>
  <title>ğŸ“… ë‹¬ë ¥</title>
</head>

<body>
<div class="container">
  <div class="card">

    <!-- HEADER -->
    <div class="header-bar">
      <h1>ğŸ“… ë‹¬ë ¥</h1>
      <a href="/" class="logout-btn">ë©”ì¸</a>
    </div>

    <!-- CALENDAR HEADER -->
    <div class="calendar-header">
      <button class="nav-btn" id="prevMonth">â—€</button>
      <h2 id="calendarTitle"></h2>
      <button class="nav-btn" id="nextMonth">â–¶</button>
    </div>

    <!-- WEEK -->
    <div class="calendar-week">
      <div>ì¼</div><div>ì›”</div><div>í™”</div>
      <div>ìˆ˜</div><div>ëª©</div><div>ê¸ˆ</div><div>í† </div>
    </div>

    <!-- GRID -->
    <div class="calendar-grid" id="calendarGrid"></div>

    <p class="small">
      â€¢ ë‚ ì§œ í´ë¦­ â†’ ë©”ëª¨ ì¶”ê°€ ì˜ˆì •<br/>
      â€¢ ë©”ëª¨ëŠ” ìµœëŒ€ <b>4ì¤„ / ì¤„ë‹¹ 20ì</b>
    </p>

  </div>
</div>

<script>
/* =====================================================
   CALENDAR CORE
===================================================== */

let current = new Date();
current.setDate(1);

const titleEl = document.getElementById("calendarTitle");
const gridEl = document.getElementById("calendarGrid");

const today = new Date();
const todayKey = today.toISOString().slice(0,10);

/* ì„ì‹œ ë©”ëª¨ ë°ì´í„° (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ DB ì—°ë™) */
const memoData = {
  "2026-01-11": ["ë©”ëª¨1", "ë©”ëª¨2", "ë©”ëª¨3"],
  "2026-01-20": ["ì¶œê³  ì˜ˆì •", "í˜„ì¥ ì ê²€"],
};

function renderCalendar() {
  gridEl.innerHTML = "";

  const year = current.getFullYear();
  const month = current.getMonth();

  titleEl.textContent = `${year}ë…„ ${month + 1}ì›”`;

  const firstDay = new Date(year, month, 1).getDay();
  const lastDate = new Date(year, month + 1, 0).getDate();

  /* ì• ê³µë°± */
  for (let i = 0; i < firstDay; i++) {
    gridEl.appendChild(document.createElement("div"));
  }

  /* ë‚ ì§œ ìƒì„± */
  for (let d = 1; d <= lastDate; d++) {
    const date = new Date(year, month, d);
    const key = date.toISOString().slice(0,10);

    const cell = document.createElement("div");
    cell.className = "calendar-cell clickable";

    if (key === todayKey) cell.classList.add("today");
    if (memoData[key]) cell.classList.add("has-memo");

    const dateEl = document.createElement("div");
    dateEl.className = "calendar-date";
    dateEl.textContent = d;

    const memoEl = document.createElement("div");
    memoEl.className = "calendar-memo";

    if (memoData[key]) {
      memoData[key].slice(0,4).forEach(t => {
        const line = document.createElement("div");
        line.textContent = t;
        memoEl.appendChild(line);
      });
    }

    cell.appendChild(dateEl);
    cell.appendChild(memoEl);

    cell.onclick = () => {
      alert(`${year}-${month+1}-${d} í´ë¦­\n(ë‹¤ìŒ ë‹¨ê³„: ë©”ëª¨ ì…ë ¥)`);
    };

    gridEl.appendChild(cell);
  }
}

/* ì›” ì´ë™ */
document.getElementById("prevMonth").onclick = () => {
  current.setMonth(current.getMonth() - 1);
  renderCalendar();
};
document.getElementById("nextMonth").onclick = () => {
  current.setMonth(current.getMonth() + 1);
  renderCalendar();
};

renderCalendar();
</script>

</body>
</html>
